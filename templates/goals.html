{% extends 'base.html' %}
{% block content %}
<h2>Goals</h2>
<ul class="list-group mb-4">
  {% for g in goals %}
  <li class="list-group-item goal-item">
    <div class="d-flex justify-content-between">
      <strong>{{ g.title }}</strong>
      <form method="post" action="{{ url_for('update_goal', goal_id=g.id) }}" class="d-flex">
        <input type="number" name="progress" class="form-control form-control-sm me-2" placeholder="+min" style="width:80px">
        <button class="btn btn-primary btn-sm">Log</button>
      </form>
    </div>
    <div class="progress mt-2">
      <div class="progress-bar" style="width: {{ (g.progress / g.target * 100)|int }}%;">
        {{ g.progress }} / {{ g.target }}
      </div>
    </div>
  </li>
  {% endfor %}
</ul>
<h5>Add New Goal</h5>
<form method="post" class="needs-validation" novalidate>
  <div class="mb-3">
    <input type="text" name="title" class="form-control {% if errors.title %}is-invalid{% endif %}" placeholder="Goal title" value="{{ form_data.title }}" required>
    {% if errors.title %}<div class="invalid-feedback">{{ errors.title }}</div>{% endif %}
  </div>
  <div class="mb-3">
    <input type="number" name="target" class="form-control {% if errors.target %}is-invalid{% endif %}" placeholder="Target minutes" value="{{ form_data.target }}" required>
    {% if errors.target %}<div class="invalid-feedback">{{ errors.target }}</div>{% endif %}
  </div>
  <button class="btn btn-success">Add Goal</button>
</form>
{% endblock %}
